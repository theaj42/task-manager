# Task System Consolidation Plan

## Overview

This plan consolidates 7+ overlapping task management systems in the `80 - Tasks` directory into a unified, well-functioning system with clear roles and responsibilities.

**Goals:**
- Single source of truth: `81 - Task Database/task_database.md`
- Archive broken/unused systems
- Migrate 74 legacy tasks from To-Do.md
- Implement tag-based backlog (#backlog)
- Maintain Todoist integration with Obsidian as authoritative source
- Clear role definition for each system component

## Current State Analysis

### Active Systems (Keep)
1. **Task Database** (`81 - Task Database/task_database.md`)
   - 87 tasks, structured format
   - Works with task-manager agent
   - Source of truth for all tasks

2. **Task Dashboard** (`Task Dashboard.md`)
   - Auto-generated by task-manager agent
   - Comprehensive view of all tasks
   - Updated daily at 0400

3. **Task Pages** (`82 - Task Pages/`)
   - For complex multi-step projects
   - Keep as-is for detailed task planning

4. **Focus Sprints** (`84 - Focus Sprints/`)
   - Time-boxed work sessions
   - Keep for sprint planning

### Systems to Archive
1. **ADHD Dashboard** (`10 - Task Dashboard/ADHD_Dashboard.md`)
   - Reason: Broken dataview queries, performance issues

2. **All Open TO-DO Items.md**
   - Reason: Superseded by Task Dashboard

3. **Old Task Dashboard Directory** (`10 - Task Dashboard/`)
   - Reason: Replaced by new auto-generated dashboard

4. **Task Views** (`85 - Task Views/`)
   - Reason: Planned but never implemented

### Systems to Migrate
1. **To-Do.md**
   - 74 tasks from mid-2024
   - Migrate to task_database.md with proper formatting
   - Then archive original

## Implementation Plan

### Phase 1: Process Daily Note Annotations (15 min)

**Objective:** Handle user's task notes from today's daily note before restructuring begins.

**Tasks to Process:**

1. **"Develop IR Skills Practice Plan"**
   - Action: Add `#backlog` tag to task in task_database.md
   - Preserve existing `#P2 #energy/medium #attention/medium`
   - Keep note: "Send this to the backlog for now. We can review later."

2. **"Plan stories for the next two sprints"**
   - Action: Update to recurring task
   - Set due date: Every other Tuesday starting 2025-10-21
   - Format: `due_date: 2025-10-21 (recurring: bi-weekly, Tuesday)`
   - Keep existing priority and tags

3. **"Call Northwestern Medicine to get on Dr. Heredia's cancellation list"**
   - Action: Add `#backlog` tag
   - Update note: "This can go to backlog. I have a new doc who's okay for now."

4. **"Have conversation with team about AI data security"**
   - Action: Change priority from `#P2` to `#P3`
   - Set due date: `2025-12-15`
   - Remove from critical tasks (will happen automatically with new priority)
   - Update note to reflect de-prioritization

5. **"Add criticality 3 data to Mac dashboard"**
   - Action: Mark as complete (user figured it out - it was about Qualys VMP dash)
   - Update note: "This is complete" (already in daily note)

**Verification:**
```bash
# After edits, verify task_database.md parses correctly
./task-manager.py status
```

### Phase 2: Create Archive Structure (5 min)

**Objective:** Set up organized archive for deprecated systems.

**Steps:**

1. Create archive directory:
   ```bash
   mkdir -p "/Users/aj/Dropbox/DropsyncFiles/git/obsidian/base_vault/80 - Tasks/_Archive"
   ```

2. Create archive README:
   - File: `80 - Tasks/_Archive/README.md`
   - Content: Explain what's archived and why
   - Include date of archival
   - Reference new unified system

**Template for Archive README:**
```markdown
# Archived Task Systems

This directory contains deprecated task management systems archived on 2025-10-21 during consolidation.

## Why Archived

The task management system was consolidated to use:
- **Single Source of Truth**: `81 - Task Database/task_database.md`
- **Auto-Generated Dashboard**: `Task Dashboard.md` (updated daily at 0400)
- **task-manager Agent**: Python-based orchestrator for task recommendations

These archived systems were either:
- Superseded by new automation (dashboards)
- Never fully implemented (task views)
- Performance issues (dataview-based queries)

## What's Archived

- `ADHD_Dashboard.md` - Broken dataview queries
- `All Open TO-DO Items.md` - Superseded by Task Dashboard
- `10 - Task Dashboard/` - Old manual dashboard system
- `85 - Task Views/` - Planned but not implemented
- `To-Do.md` - Legacy unstructured list (tasks migrated to task_database.md)

## Need Something from Archives?

All tasks from these systems were migrated to `task_database.md`. If you need to reference old organization or notes, check the archived files.
```

### Phase 3: Archive Broken Systems (10 min)

**Objective:** Move deprecated systems to _Archive/ without data loss.

**Steps:**

1. Move ADHD Dashboard:
   ```bash
   mv "/Users/aj/Dropbox/DropsyncFiles/git/obsidian/base_vault/80 - Tasks/10 - Task Dashboard/ADHD_Dashboard.md" \
      "/Users/aj/Dropbox/DropsyncFiles/git/obsidian/base_vault/80 - Tasks/_Archive/"
   ```

2. Move All Open TO-DO Items:
   ```bash
   mv "/Users/aj/Dropbox/DropsyncFiles/git/obsidian/base_vault/80 - Tasks/All Open TO-DO Items.md" \
      "/Users/aj/Dropbox/DropsyncFiles/git/obsidian/base_vault/80 - Tasks/_Archive/"
   ```

3. Move old Task Dashboard directory:
   ```bash
   mv "/Users/aj/Dropbox/DropsyncFiles/git/obsidian/base_vault/80 - Tasks/10 - Task Dashboard" \
      "/Users/aj/Dropbox/DropsyncFiles/git/obsidian/base_vault/80 - Tasks/_Archive/"
   ```

4. Move Task Views:
   ```bash
   mv "/Users/aj/Dropbox/DropsyncFiles/git/obsidian/base_vault/80 - Tasks/85 - Task Views" \
      "/Users/aj/Dropbox/DropsyncFiles/git/obsidian/base_vault/80 - Tasks/_Archive/"
   ```

**Verification:**
```bash
# Check archive contents
/bin/ls -la "/Users/aj/Dropbox/DropsyncFiles/git/obsidian/base_vault/80 - Tasks/_Archive/"

# Verify main directory is cleaner
/bin/ls -la "/Users/aj/Dropbox/DropsyncFiles/git/obsidian/base_vault/80 - Tasks/"
```

### Phase 4: Migrate To-Do.md Tasks (45-60 min)

**Objective:** Migrate 74 tasks from unstructured To-Do.md to structured task_database.md format.

**Migration Strategy:**

1. **Read and analyze To-Do.md** to understand task structure
2. **Extract tasks** with any existing metadata (dates, contexts, etc.)
3. **Convert to task_database.md format** with proper tags:
   - Assign priority based on context clues (default: P3)
   - Assign energy/attention requirements (default: medium/medium)
   - Add `#backlog` tag to tasks without clear urgency
   - Preserve any existing due dates
   - Add source note: "Migrated from To-Do.md on 2025-10-21"

4. **Append to task_database.md** in organized blocks
5. **Verify** tasks appear in dashboard and recommendations
6. **Archive original To-Do.md**

**Task Format Template:**
```markdown
- [ ] **Task Title** #P3 #energy/medium #attention/medium #backlog
  - **Source**: Migrated from To-Do.md (2025-10-21)
  - Note: [Any context from original task]
```

**Process:**

1. Read To-Do.md:
   ```bash
   ./task-manager.py # Will use Read tool to examine To-Do.md
   ```

2. Create migration script or manually convert:
   - Group related tasks together
   - Add appropriate tags based on task content
   - Assign realistic priorities (don't make everything P1!)
   - Use #backlog for tasks without clear timeframes

3. Add tasks to task_database.md:
   - Append to end of file in organized sections
   - Maintain consistent formatting
   - Use proper Obsidian task syntax

4. Verify migration:
   ```bash
   # Check task count increased
   ./task-manager.py status

   # Verify tasks appear in dashboard
   ./task-manager.py sync-dashboard
   ```

5. Archive To-Do.md:
   ```bash
   mv "/Users/aj/Dropbox/DropsyncFiles/git/obsidian/base_vault/80 - Tasks/To-Do.md" \
      "/Users/aj/Dropbox/DropsyncFiles/git/obsidian/base_vault/80 - Tasks/_Archive/"
   ```

**Quality Checks:**
- [ ] All 74 tasks accounted for in task_database.md
- [ ] Each task has minimum tags: priority, energy, attention
- [ ] Backlog tasks tagged with #backlog
- [ ] No orphaned tasks or broken formatting
- [ ] Dashboard shows increased task count (87 → ~161)

### Phase 5: Implement Backlog System (15 min)

**Objective:** Establish tag-based backlog for deferred tasks.

**Strategy:** Use `#backlog` tag (no separate file for now)

**Implementation:**

1. **Document backlog usage** in task_database.md header:
   ```markdown
   ## Backlog

   Tasks tagged with #backlog are deferred for future consideration.
   These tasks won't appear in daily recommendations unless specifically queried.

   To work with backlog:
   - Add #backlog tag to defer tasks
   - Remove #backlog tag to activate tasks
   - Use `./task-manager.py list --filter backlog` to view backlog tasks
   ```

2. **Update task-manager agent** to filter backlog from recommendations:
   - Modify `recommend_next_actions()` to exclude #backlog by default
   - Add optional `--include-backlog` flag to CLI

3. **Tag existing backlog candidates:**
   - Tasks with notes like "send to backlog"
   - Tasks marked as low priority with no due date
   - Exploratory/someday-maybe tasks

**Verification:**
```bash
# Check that backlog tasks don't appear in recommendations
./task-manager.py recommend

# Verify backlog tasks can still be listed
./task-manager.py list --filter backlog
```

### Phase 6: Update Documentation (20 min)

**Objective:** Document unified system architecture and workflows.

**Files to Update:**

1. **Create `80 - Tasks/README.md`:**
   ```markdown
   # Task Management System

   ## System Architecture

   This directory contains a unified task management system powered by the task-manager agent.

   ### Components

   #### 81 - Task Database
   - **Purpose**: Single source of truth for all tasks
   - **File**: `task_database.md`
   - **Format**: Structured markdown with tags for priority, energy, attention
   - **Tasks**: ~161 tasks across all priority levels

   #### Task Dashboard
   - **Purpose**: Comprehensive view of all tasks for manual curation
   - **File**: `Task Dashboard.md`
   - **Updates**: Auto-generated daily at 0400, manual with `./task-manager.py sync-dashboard`
   - **Grouping**: Priority (P1 → P4), then by source

   #### 82 - Task Pages
   - **Purpose**: Detailed planning for complex multi-step tasks
   - **Format**: One page per major project
   - **Usage**: For tasks requiring subtasks, dependencies, or extensive notes

   #### 83 - Daily Task Integration
   - **Purpose**: Task recommendations appear in daily notes
   - **Location**: `1 - Daily/YYYY-MM-DD.md` → `## Tasks` section
   - **Updates**: Auto-generated daily at 0400, manual with `./task-manager.py sync-daily`
   - **Behavior**: Checking boxes in daily note marks tasks complete in source

   #### 84 - Focus Sprints
   - **Purpose**: Time-boxed work sessions
   - **Format**: Sprint planning templates
   - **Usage**: For focused execution periods

   ### Workflows

   #### Morning Routine
   1. **0400** - Auto-sync runs (you're asleep)
   2. **Wake up** - Open today's daily note, `## Tasks` section pre-populated
   3. **Work through tasks** - Check boxes as you complete them
   4. **During day** - Run `./task-manager.py sync-daily` if capacity changes

   #### Task Curation
   1. Open `Task Dashboard.md` for full task list
   2. Edit tasks in `task_database.md`
   3. Run `./task-manager.py sync-dashboard` to refresh view

   #### Backlog Management
   - Add `#backlog` tag to defer tasks
   - Backlog tasks excluded from daily recommendations
   - Review backlog with `./task-manager.py list --filter backlog`

   ### Todoist Integration
   - **Relationship**: Both Obsidian and Todoist are active
   - **Source of Truth**: Obsidian task_database.md is authoritative
   - **Sync Direction**: Obsidian → Todoist
   - **Use Cases**:
     - Obsidian: Primary task management, planning, curation
     - Todoist: Mobile quick capture, collaboration

   ### Tags

   - **Priority**: `#P1` (urgent) → `#P4` (low)
   - **Energy**: `#energy/high`, `#energy/medium`, `#energy/low`
   - **Attention**: `#attention/high`, `#attention/medium`, `#attention/low`
   - **Status**: `#backlog` (deferred), `#importance/high` (critical override)
   - **Context**: Custom tags for filtering (e.g., `#work`, `#personal`, `#p/vmp`)

   ### CLI Commands

   ```bash
   # Get task recommendations based on current capacity
   ./task-manager.py recommend

   # List all tasks
   ./task-manager.py list

   # Check system status
   ./task-manager.py status

   # Mark task complete
   ./task-manager.py complete "task title"

   # Sync daily note with fresh recommendations
   ./task-manager.py sync-daily

   # Update Task Dashboard
   ./task-manager.py sync-dashboard

   # Sync checked boxes from daily note to source systems
   ./task-manager.py sync-completions

   # Run full auto-sync (all three commands)
   ./auto-sync.sh
   ```

   See `~/git/task-manager/docs/` for detailed documentation.
   ```

2. **Update task-manager project README.md:**
   - Add consolidation completion notes
   - Document backlog filtering
   - Update task counts
   - Add link to Obsidian vault README

3. **Update AUTO_SYNC.md:**
   - Add note about backlog exclusion from daily sync
   - Document new --include-backlog flag

**Verification:**
- [ ] README.md clearly explains system architecture
- [ ] Workflows documented for common use cases
- [ ] Tags documented with examples
- [ ] CLI commands listed with descriptions

### Phase 7: Testing & Verification (30 min)

**Objective:** Ensure consolidated system works end-to-end.

**Test Cases:**

1. **Task Count Verification:**
   ```bash
   ./task-manager.py status
   # Expected: ~161 tasks (87 existing + 74 migrated)
   # Verify: Critical tasks count, source distribution
   ```

2. **Dashboard Generation:**
   ```bash
   ./task-manager.py sync-dashboard
   # Check: Task Dashboard.md updated with all migrated tasks
   # Verify: Grouping by priority works correctly
   # Verify: Stats header shows accurate counts
   ```

3. **Daily Note Sync:**
   ```bash
   ./task-manager.py sync-daily
   # Check: ## Tasks section in today's daily note
   # Verify: Backlog tasks excluded from recommendations
   # Verify: Critical tasks appear correctly
   # Verify: Capacity matching works with migrated tasks
   ```

4. **Completion Sync:**
   - Manually check a box in today's daily note
   ```bash
   ./task-manager.py sync-completions
   # Verify: Task marked complete in task_database.md
   # Verify: Task removed from dashboard
   ```

5. **Backlog Filtering:**
   ```bash
   ./task-manager.py recommend
   # Verify: No backlog tasks appear

   ./task-manager.py list --filter backlog
   # Verify: Only backlog tasks appear
   ```

6. **Auto-Sync Test:**
   ```bash
   ./auto-sync.sh
   # Check: logs/auto-sync.log for successful execution
   # Verify: All three commands completed
   # Verify: No errors in output
   ```

7. **Archive Verification:**
   ```bash
   /bin/ls -la "/Users/aj/Dropbox/DropsyncFiles/git/obsidian/base_vault/80 - Tasks/_Archive/"
   # Verify: All deprecated systems archived
   # Verify: Archive README.md exists
   ```

8. **Directory Structure Check:**
   ```bash
   /bin/ls -la "/Users/aj/Dropbox/DropsyncFiles/git/obsidian/base_vault/80 - Tasks/"
   # Verify: Clean structure with only active systems
   # Verify: README.md exists
   # Verify: _Archive/ directory present
   ```

**Success Criteria:**
- [ ] All 74 tasks migrated and appearing in system
- [ ] Backlog tasks excluded from daily recommendations
- [ ] Dashboard shows accurate task counts and grouping
- [ ] Daily note sync works with migrated tasks
- [ ] Completion sync works end-to-end
- [ ] Auto-sync runs without errors
- [ ] Archive contains all deprecated systems
- [ ] Documentation is complete and accurate
- [ ] No broken links or formatting in Obsidian vault

## Post-Consolidation

### Immediate Next Steps
1. Run first full auto-sync at 0400 tomorrow morning
2. Review tomorrow's daily note for quality of recommendations
3. Test completion workflow with real tasks
4. Monitor for edge cases or issues

### Future Enhancements
1. **Backlog Management**:
   - Consider separate backlog.md if tag-based approach becomes unwieldy
   - Add backlog review to monthly/quarterly routines

2. **Todoist Sync**:
   - Implement bidirectional sync if needed
   - Add Todoist completion detection

3. **Advanced Filtering**:
   - Add `--filter` flag for various task queries
   - Support complex queries (e.g., "P1 tasks with energy/high due this week")

4. **Analytics**:
   - Track completion rates
   - Analyze attention tax patterns
   - Identify chronically deferred tasks

5. **Mobile Integration**:
   - Optimize daily note format for mobile viewing
   - Consider Todoist mobile app as quick-capture tool

## Rollback Plan

If consolidation causes issues:

1. **Tasks still in original locations** (archived, not deleted)
2. **Restore from archive:**
   ```bash
   cp -r "/Users/aj/Dropbox/DropsyncFiles/git/obsidian/base_vault/80 - Tasks/_Archive/"* \
         "/Users/aj/Dropbox/DropsyncFiles/git/obsidian/base_vault/80 - Tasks/"
   ```

3. **Git history** available for task_database.md changes
4. **Auto-sync can be disabled:**
   ```bash
   launchctl unload ~/Library/LaunchAgents/com.user.task-manager.plist
   ```

## Estimated Timeline

| Phase | Duration | Dependencies |
|-------|----------|--------------|
| 1. Process Daily Note Annotations | 15 min | None |
| 2. Create Archive Structure | 5 min | None |
| 3. Archive Broken Systems | 10 min | Phase 2 |
| 4. Migrate To-Do.md Tasks | 45-60 min | None |
| 5. Implement Backlog System | 15 min | Phase 4 |
| 6. Update Documentation | 20 min | All previous |
| 7. Testing & Verification | 30 min | All previous |
| **Total** | **~2.5 hours** | |

## Success Metrics

- ✅ Single source of truth established (task_database.md)
- ✅ Zero task data loss
- ✅ All deprecated systems archived with documentation
- ✅ Backlog system functional
- ✅ Auto-sync runs daily at 0400
- ✅ Daily note integration working
- ✅ Dashboard generation working
- ✅ Completion sync working
- ✅ Documentation complete
- ✅ System tested end-to-end

---

**Created**: 2025-10-21
**Status**: Ready for implementation
**Owner**: AJ + Claude Code task-manager agent
